<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>📦 Efficient Inventory & Stock Control 📊</title>

  <meta name="description" content="Manage your inventory, track stock levels, and optimize product flow with Jikoni Stock Manager." />
  <meta name="keywords" content="inventory, stock, tracking, management" />
  <meta name="author" content="Welt Tallis Development Team" />
  <meta property="og:title" content="Jikoni Stock Manager - Your Inventory, Optimized! 📊" />
  <meta property="og:description" content="Track stock levels, manage products, and streamline your supply chain." />
  <meta property="og:image" content="/images/share.jpg" />
  <meta property="og:url" content="https://jikonistock.app" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="/images/share.jpg" />
  <meta name="twitter:description" content="Take control of your inventory with Jikoni Stock Manager! 📊" />

  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="/images/logo2.png" type="image/png" />
  <link rel="icon" href="/images/icon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png" />
  <link rel="mask-icon" href="/images/image.png" color="#FF4532" />
  <meta name="theme-color" content="#FF4532" />

  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-title" content="Jikoni Stock Manager" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" as="style" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous" />
</head>

<body class="d-flex flex-column min-vh-100">
  <div id="root" role="main"></div>

  <script src="./src/main.jsx" type="module"></script>

  <script>
    // ========== SERVICE WORKER REGISTRATION ==========
  if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/service-worker.js').then(registration => {
      console.log('[Client] Service Worker registered with scope:', registration.scope);

      registration.addEventListener('updatefound', () => {
        const newWorker = registration.installing;
        newWorker.addEventListener('statechange', () => {
          if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
            if (confirm('New version available. Refresh now?')) {
              newWorker.postMessage({ type: 'SKIP_WAITING' });
            }
          }
        });
      });

      navigator.serviceWorker.addEventListener('controllerchange', () => {
        console.log('[Client] Controller changed. Reloading...');
        window.location.reload();
      });

      navigator.serviceWorker.addEventListener('message', event => {
        if (event.data?.type === 'NEW_VERSION_AVAILABLE') {
          console.log(`[Client] New version ${event.data.version} available`);
          if (confirm(`Update to version ${event.data.version}?`)) {
            registration.update().then(() => window.location.reload());
          }
        } else if (event.data?.type === 'FORCE_RELOAD') {
          window.location.reload();
        }
      });

    }).catch(err => {
      console.error('[Client] SW registration failed:', err);
    });
  });
}

  </script>

  <!-- Optional network status messages -->
  <script>
    window.addEventListener('online', () => console.log('✅ Back online'));
    window.addEventListener('offline', () => console.warn('⚠️ You are offline'));
  </script>
</body>
</html>
